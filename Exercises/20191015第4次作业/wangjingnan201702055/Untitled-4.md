# 第四次作业
1.基于OpenCV的边缘检测
边缘检测的一般步骤。
【1】滤波
    边缘检测的算法主要是基于图像强度的一阶和二阶导数，但导数通常对噪声很敏感，因此必须采取滤波器来改善与噪声有关的边缘检测器的性能。常见的滤波方法主要有高斯滤波，即采用离散化的高斯函数产生一组归一化的高斯核，然后基于高斯核函数对图像灰度矩阵的每一点进行加权求和。 
【2】增强
    增强边缘的基础是确定图象个点领域强度的变化值。增强算法可以将图像灰度点领域强度值有显著变化的点凸显出来。在具体编程实现时，可通过计算梯度幅值来确定。
【3】检测
    经过增强的图像，往往领域中有很多点的梯度值比较大，而在特定的应用中，这些点并不是要找的边缘点，所以应该采用某种方法来对这些点进行取舍。实际工程中，常用的方法时通过阈值化方法来检测。
边缘检测的Canny算子、Sobel算子、Laplacian算子以及Scharr滤波器。
Sobel算子检测方法对灰度渐变和噪声较多的图像处理效果较好，sobel算子对边缘定位不是很准确，图像的边缘不止一个像素；当对精度要求不是很高时，是一种较为常用的边缘检测方法。    

Canny方法不容易受噪声干扰，能够检测到真正的弱边缘。优点在于，使用两种不同的阈值分别检测强边缘和弱边缘，并且当弱边缘和强边缘相连时，才将弱边缘包含在输出图像中。

Laplacian算子法对噪声比较敏感，所以很少用该算子检测边缘，而是用来判断边缘像素视为与图像的明区还是暗区。拉普拉斯高斯算子是一种二阶导数算子，将在边缘处产生一个陡峭的零交叉, Laplacian算子是各向同性的，能对任何走向的界线和线条进行锐化，无方向性。这是拉普拉斯算子区别于其他算法的最大优点。
以下为实验图例
![](.\media\17.jpg)
![](.\media\18.jpg)   
![](.\media\19.jpg)
![](.\media\20.jpg)

2 霍夫变换
  霍夫变换在OpenCV中分为霍夫线变换和霍夫圆变换两种，下面将分别进行介绍。
 【1】 OpenCV中的霍夫线变换
  对于平面中的一条直线，在笛卡尔坐标系中，常见的有点斜式，两点式两种表示方法。然而在hough变换中，考虑的是另外一种表示方式：使用（r,theta）来表示一条直线。其中r为该直线到原点的距离，theta为该直线的垂线与x轴的夹角。如下图所示。
  ![](.\media\a.jpg)
  也就是霍夫变换中表示一条直线的参数变成了（r,theta）。
2.如何判断多个点是否在同一直线上
当我们的对象变成点时，我们知道一个点可以发射出无数条直线，根据霍夫变换的直线表达形式，假设这个点为i,则通过这个点的直线我们用（ri,thetai）表示。再假设一个点为j，则通过点j的一系列直线我们用（rj,thetaj）表示。我们知道两点决定一条直线，所以这两个点的直线必定有ri=rj,thetai= thetaj的时候。
那如果是三个点呢，假设第三个点是k，则通过k点的一系列直线为（rk,thetak）,如果三点在一条直线上，那必定有某个ri=rj=rk = r,thetai = thetaj= thetak = theta。
在霍夫变换检测直线时我们需要找到这样一样直线，如何找到这条直线呢？
3.如何检测出直线
假设有N个点，我们要检测其中的直线，也就是我们要找到具体的r和theata。对于上面所说的每个点可以通过无数条直线，这里我们设为n条（通常 n = 180），则我们一起可以找到Nn个（r, theata），对这Nn个（r,theata）,我们可以利用统计学，统计到在theta=某个值theta_i时，多个点的r近似相等于r_i。也就是说这多个点都在直线（r_i,theta_i）上。
4.举例说明
如果空间中有3个点，如何判断这三个点在不在一个直线上，如果在，这条直线是的位置为？
![](.\media\b.jpg)
【2】霍夫圆变换
1.圆的表示方式
两点确定一条直线，不在一条直线上的三点确定一个圆。与使用（r,theta）来表示一条直线相似，使用（a,b,r）来确定一个圆心为（a,b）半径为 r 的圆。
2.如何判断多个点是否在一个圆上
同样经过一个点可以作出无数个圆，假设某个点平面坐标为(xi,yi)，使用的参数为（ai,bi,ri）则经过此点的圆的表达式为（xi-ai）^2 +（yi-bi） ^ 2=ri ^ 2。对于点（xj,yj）,必定存在（aj,bj,rj）使得 近似计算中 ai=aj,bi= bj, ri = rj，即两个点在同一个圆上；同理如果三个点在同一个圆上，则也必须存在 ai=aj =ak = a, bi=bj=bk = b, ri=rj=rk = r 的情况。
3.如何检测圆
要将圆检测出来，也就是要将上述的（a,b,r）求解出来。
假设r确定，此时点（x,y）又已知，根据（x-a）^2 +（y-b） ^ 2=r ^ 2 ，则（a,b）的轨迹在几何上则变成了以（x,y）为圆心，r为半径的圆；而r不确定时，（a,b，r）的轨迹变成了以（x,y）为顶点的一个圆锥。则（ai,bi,ri）,(aj,bj,rj), (ak,bk,rk)的圆为下图中圆锥面的角点A。
![](.\media\c.jpg)
无论是直线还是圆，都是根据本身的几何形状的数学性质，直线根据极坐标的（r,theta）来表示,圆根据（a,b,r）来表示。要检测出直线或者圆其实就是要找到这样的（r,theta）或者（a,b,r）。根据相关的直线或圆的表达式反推出（r,theta）及（a,b,r）的轨迹，相应轨迹的交点就是要找到的直线或圆或想要找到的形状。
霍夫变换综合演示
![](.\media\21.jpg)


