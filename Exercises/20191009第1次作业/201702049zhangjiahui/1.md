># 第一次作业

>>## opencv 入门
* 1.OpenCV的相关概念
  
  图像处理（Image Processing）是用计算机对图像进行分析，以达到所需结果的技术，又称影像处理。图像处理技术一般包括图像压缩，增强和复原，匹配、描述和识别3个部分。

  计算机视觉（Computer Vision）是一门研究如何使机器“看”的科学，具体地说，就是指用摄影机和电脑代替人眼对目标进行识别、跟踪和测量等机器视觉，并进一步做图像处理用电脑处理使之成为更适合人眼观察或传送给仪器检测的图像的一门学科。

  以上两者的区别：图像处理侧重于“处理”图像，如增强，还原，去噪，分割等；而计算机视觉重点在于是用计算机来模拟人的视觉，因此模拟才是计算机视觉领域的最终目标。

* 2.OpenCV的下载、安装与配置
  
  **VS2019与OpenCV4.11的详细配置**
  * 安装vs2019 Community
  1. 下载Visual Studio Community 2019

    下载地址：*https://visualstudio.microsoft.com/*
    ![](1.1.png)

  2. 安装后打开，启动界面如下：
    ![](1.2.png)
  * 安装OpenCV4.1.1版本
    从所给资料中下载OpenCV411，并安装到某个给定目录下，如下：
    ![](1.3.png)
  * 配置OpenCV环境变量
  1. 在我的电脑上右键“属性”，点击“高级系统环境”
    ![](1.4.png)

  2. 在用户变量中，点击Path变量并编辑，添加dll所在路径
    ![](1.5.png)
    ![](1.6.png)
    确定后，并重启以使得环境变量生效
  * 在vs 2019 中新建项目
  1. 选择路径“File->New->Project”:
    ![](1.7.png)

  2. 依次选择language为c++，Platform为Windows，Project type为desktop
    ![](1.8.png)

  3. 选择Windows Desktop Wizard，并选择next
    ![](1.9.png)

  4. 点击create,并在弹出的对话框中选择，Application type为console,选择empty project
    ![](1.10.png)

  5. 在source files里添加test01.cpp源文件，右键test01 ，选择属性；
    选择VC++ 目录（VC++ Directories），在包含目录（Include Directories）中添加:
    D:\OpenCV\opencv\build\include
    D:\OpenCV\opencv\build\include\opencv2
    ![](1.11.png)

  6. 库目录（Library Directories）中添加：
    D:\OpenCV\opencv\build\x64\vc15\lib
    ![](1.12.png)

  7. 在链接器（linler）->输入（input）目录下，点击附加依赖项（Additional Dependencies）并添加opencv_world411d.lib静态库：
    ![](1.13.png)
点击ok并确定退出。
  * 测试OpenCV代码
    在test01.cpp中添加显示的代码：

    显示图片如下：

    ![](1.14.png)
在此过程中，花费了不少时间去进行环境配置以达到要求，也出现了一些自己不太能解决的问题，通过其他同学的帮助，找到了问题所在，并得以解决。

>>## opencv的测试

>>>### Prog01：图像显示

先载入图片，然后显示图像，并且调用waitKey函数等待按键按下，以便让图片窗口一直显示，直到有按键按下。放置一张图片到工程目录下，并改名为程序代码中指定的“f.jpg”，然后运行程序
图像显示如下：

![](1.15.png)

>>>### Prog02:图像腐蚀

首先还是先载入和显示图像，然后定义一个Mat类型的变量来获得getStructingElement函数的返回值，而getStructingElement函数的返回值为指定形状和尺寸的结构元素。参数准备完毕后，便可调用ecode函数进行图像腐蚀操作，最后调用imshow函数进行显示，用waitKey函数等待按键按下，以便让窗口一直显示。
图像原图（左）腐蚀（右）效果如下：
![](1.16.png)

>>>### Prog03：图像模糊

模糊一幅图像的代码主要使用进行均值滤波操作的blur函数。载入并显示原始图后，调用一次blur函数
图像原图（左）模糊（右）效果如下：
![](1.17.png)

>>>### Prog04：边缘检测

用OpenCV进行canny边缘检测。载入图像，并将其转换为灰度图，再用blur幻术进行图像模糊进行降噪，然后用canny函数进行边缘检测，最后进行显示
图像原图（左）边缘检测（右）效果如下：

![](1.18.png)

># 小结
    我在配置相关环境时，花费的时间比其他同学要多一些。在多次配置过程中出现了一些问题，通过替他同学的帮助发现错误所在，并将其改正。
 * 问题一：无法解析的外部命令
  
   考虑需要用win32编译器还是x64编译器。在编程时使用编译器是win32，就用x86；编译器是X64,就用x64
* 问题二：图像路径是正确的，但是载入不了图像，提示有未经处理的异常
    检查确保图像后缀名和路径与代码中的一致。打开当前工程的属性页，debug或者release报错，就把对应的带d或不带d的lib添加到【工程属性】->【链接器】->【输入】->【附加的依赖项】，如下图，
![](1.19.png)
* 问题三：无法打开文件"opencv_ml249d.lib"系列的错误
这是一个常见的错误，主要是因为包含的库目录中，和包含的附加依赖项不能相互对应造成的。检查以下三个方面：

  * 检查工程库目录的配置，库目录中的路径是否准确。
  * 检查链接库的配置中“附加依赖项”的格式有没有问题。
  * 检查环境变量的配置是否准确。

通过本节课的学习，我已经对OpenCV有了一些初步的认识（可能还是比较模糊，希望在后续学习中可以更加清晰地了解OpenCV）。我了解了OpenCV的一些相关概念及其基本架构。在完成配置后接触了4个OpenCV图像处理的小程序，看懂理解后运行的到对应的效果图，对这门课有了很大的兴趣。